<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0"
           xmlns:jaxws="http://cxf.apache.org/blueprint/jaxws"
           xmlns:cxf="http://cxf.apache.org/blueprint/core"
           xmlns:camel="http://camel.apache.org/schema/blueprint"
           xmlns:camelcxf="http://camel.apache.org/schema/blueprint/cxf"
           xsi:schemaLocation="
             http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd
             http://cxf.apache.org/blueprint/jaxws http://cxf.apache.org/schemas/blueprint/jaxws.xsd
             http://cxf.apache.org/blueprint/core http://cxf.apache.org/schemas/blueprint/core.xsd">
  
   <bean id="ProxySorterBuilder" class="ru.cse.proxysorter.ProxySorterBuilder"/>
    <bean id="itemRestService" class="ru.cse.proxysorter.ItemRestService" />
    <bean id="length-DecoderSorterTlg" class="ru.cse.proxysorter.NettyCodecs.SorterCodecFactory" factory-method="createDecoderSorterTlg"/>
    <!--<bean id="client" class="demo.spring.service.HelloWorld" factory-bean="clientFactory" factory-method="create"/> -->

    <bean id="clientFactory" class="org.apache.cxf.jaxws.JaxWsProxyFactoryBean">
        <property name="serviceClass" value="ru.cse.proxysorter.ItemRestService"/>
        <property name="address" value="http://web.cse.ru/cse82_reg/ws/WebServicesNewCSE?wsdl"/>
    </bean>

    <cxf:cxfEndpoint id="reportIncident"
                          address="http://web.cse.ru/cse82_reg/ws/WebServicesNewCSE"
                          endpointName="s:ReportIncidentEndpoint"
                          serviceName="s:Version"
                          wsdlURL="http://web.cse.ru/cse82_reg/ws/WebServicesNewCSE?wsdl"
                          serviceClass="ru.cse.proxysorter.ItemRestService"/>

    <!-- xmlns:s="http://reportincident.example.camel.apache.org"/> -->

    <bean id="length-EncoderSorterTlg" class="ru.cse.proxysorter.NettyCodecs.SorterCodecFactory" factory-method="createEncoderSorterTlg"/>
    <camelContext xmlns="http://camel.apache.org/schema/blueprint">
        <!-- Defining a ServiceInterfaceStrategy for retrieving the element name when marshalling -->
        <routeBuilder ref="ProxySorterBuilder"/>

    </camelContext>
   
</blueprint>
